(function(c,b,a,d){Foundation.libs.forms={name:"forms",version:"4.0.4",settings:{disable_class:"no-custom"},init:function(f,g,e){this.scope=f||this.scope;if(typeof g==="object"){c.extend(true,this.settings,g)}if(typeof g!="string"){if(!this.settings.init){this.events()}this.assemble();return this.settings.init}else{return this[g].call(this,e)}},assemble:function(){c('form.custom input[type="radio"]',c(this.scope)).not('[data-customforms="disabled"]').each(this.append_custom_markup);c('form.custom input[type="checkbox"]',c(this.scope)).not('[data-customforms="disabled"]').each(this.append_custom_markup);c("form.custom select",c(this.scope)).not('[data-customforms="disabled"]').each(this.append_custom_select)},events:function(){var e=this;c(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(f){f.preventDefault();f.stopPropagation();e.toggle_checkbox(c(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(f){f.preventDefault();f.stopPropagation();e.toggle_radio(c(this))}).on("change.fndtn.forms",'form.custom select:not([data-customforms="disabled"])',function(f){e.refresh_custom_select(c(this))}).on("click.fndtn.forms","form.custom label",function(h){var f=c("#"+e.escape(c(this).attr("for"))+':not([data-customforms="disabled"])'),i,g;if(f.length!==0){if(f.attr("type")==="checkbox"){h.preventDefault();i=c(this).find("span.custom.checkbox");if(i.length==0){i=f.add(this).siblings("span.custom.checkbox").first()}e.toggle_checkbox(i)}else{if(f.attr("type")==="radio"){h.preventDefault();g=c(this).find("span.custom.radio");if(g.length==0){g=f.add(this).siblings("span.custom.radio").first()}e.toggle_radio(g)}}}}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(i){var h=c(this),g=h.closest("div.custom.dropdown"),f=g.prev();if(!g.hasClass("open")){c(e.scope).trigger("click")}i.preventDefault();if(false===f.is(":disabled")){g.toggleClass("open");if(g.hasClass("open")){c(e.scope).on("click.fndtn.forms.customdropdown",function(){g.removeClass("open");c(e.scope).off(".fndtn.forms.customdropdown")})}else{c(e.scope).on(".fndtn.forms.customdropdown")}return false}}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(k){var j=c(this),h=j.closest("div.custom.dropdown"),i=h.prev(),g=0;k.preventDefault();k.stopPropagation();if(!c(this).hasClass("disabled")){c("div.dropdown").not(h).removeClass("open");var f=j.closest("ul").find("li.selected");f.removeClass("selected");j.addClass("selected");h.removeClass("open").find("a.current").html(j.html());j.closest("ul").find("li").each(function(l){if(j[0]==this){g=l}});i[0].selectedIndex=g;i.data("prevalue",f.html());i.trigger("change")}});c(b).on("keydown",function(j){var f=a.activeElement,k=c(".custom.dropdown.open");if(k.length>0){j.preventDefault();if(j.which===13){k.find("li.selected").trigger("click")}if(j.which===38){var i=k.find("li.selected"),h=i.prev(":not(.disabled)");if(h.length>0){i.removeClass("selected");h.addClass("selected")}}else{if(j.which===40){var i=k.find("li.selected"),g=i.next(":not(.disabled)");if(g.length>0){i.removeClass("selected");g.addClass("selected")}}}}});this.settings.init=true},append_custom_markup:function(e,h){var i=c(h).hide(),g=i.attr("type"),f=i.next("span.custom."+g);if(f.length===0){f=c('<span class="custom '+g+'"></span>').insertAfter(i)}f.toggleClass("checked",i.is(":checked"));f.toggleClass("disabled",i.is(":disabled"))},append_custom_select:function(q,g){var t=Foundation.libs.forms,m=c(g),l=m.next("div.custom.dropdown"),n=l.find("ul"),o=l.find(".current"),s=l.find(".selector"),k=m.find("option"),h=k.filter(":selected"),j=m.attr("class")?m.attr("class").split(" "):[],r=0,p="",f,e=false;if(m.hasClass(t.settings.disable_class)){return}if(l.length===0){var i=m.hasClass("small")?"small":m.hasClass("medium")?"medium":m.hasClass("large")?"large":m.hasClass("expand")?"expand":"";l=c('<div class="'+["custom","dropdown",i].concat(j).filter(function(w,v,u){if(w==""){return false}return u.indexOf(w)==v}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>');s=l.find(".selector");n=l.find("ul");p=k.map(function(){return"<li>"+c(this).html()+"</li>"}).get().join("");n.append(p);e=l.prepend('<a href="#" class="current">'+h.html()+"</a>").find(".current");m.after(l).hide()}else{p=k.map(function(){return"<li>"+c(this).html()+"</li>"}).get().join("");n.html("").append(p)}l.toggleClass("disabled",m.is(":disabled"));f=n.find("li");k.each(function(u){if(this.selected){f.eq(u).addClass("selected");if(e){e.html(c(this).html())}}if(c(this).is(":disabled")){f.eq(u).addClass("disabled")}});if(!l.is(".small, .medium, .large, .expand")){l.addClass("open");var t=Foundation.libs.forms;t.hidden_fix.adjust(n);r=(t.outerWidth(f)>r)?t.outerWidth(f):r;Foundation.libs.forms.hidden_fix.reset();l.removeClass("open")}},refresh_custom_select:function(g){var f=this;var h=0,i=g.next(),e=g.find("option");i.find("ul").html("");e.each(function(){var j=c("<li>"+c(this).html()+"</li>");i.find("ul").append(j)});e.each(function(j){if(this.selected){i.find("li").eq(j).addClass("selected");i.find(".current").html(c(this).html())}if(c(this).is(":disabled")){i.find("li").eq(j).addClass("disabled")}});i.removeAttr("style").find("ul").removeAttr("style");i.find("li").each(function(){i.addClass("open");if(f.outerWidth(c(this))>h){h=f.outerWidth(c(this))}i.removeClass("open")})},toggle_checkbox:function(e){var g=e.prev(),f=g[0];if(false===g.is(":disabled")){f.checked=((f.checked)?false:true);e.toggleClass("checked");g.trigger("change")}},toggle_radio:function(e){var h=e.prev(),g=h.closest("form.custom"),f=h[0];if(false===h.is(":disabled")){g.find('input[type="radio"][name="'+this.escape(h.attr("name"))+'"]').next().not(e).removeClass("checked");if(!e.hasClass("checked")){e.toggleClass("checked")}f.checked=e.hasClass("checked");h.trigger("change")}},escape:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},hidden_fix:{tmp:[],hidden:null,adjust:function(f){var e=this;e.hidden=f.parents().andSelf().filter(":hidden");e.hidden.each(function(){var g=c(this);e.tmp.push(g.attr("style"));g.css({visibility:"hidden",display:"block"})})},reset:function(){var e=this;e.hidden.each(function(g){var f=c(this),h=e.tmp[g];if(h===d){f.removeAttr("style")}else{f.attr("style",h)}});e.tmp=[];e.hidden=null}},off:function(){c(this.scope).off(".fndtn.forms")}}}(Foundation.zj,this,this.document));