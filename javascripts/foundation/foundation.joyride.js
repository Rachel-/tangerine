(function(c,b,a,d){Foundation.libs.joyride={name:"joyride",version:"4.0.0",defaults:{tipLocation:"bottom",nubPosition:"auto",scrollSpeed:300,timer:0,startTimerOnClick:true,startOffset:0,nextButton:true,tipAnimation:"fade",pauseAfter:[],tipAnimationFadeSpeed:300,cookieMonster:false,cookieName:"joyride",cookieDomain:false,cookieExpires:365,tipContainer:"body",postRideCallback:function(){},postStepCallback:function(){},template:{link:'<a href="#close" class="joyride-close-tip">&times;</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper"></div>',button:'<a href="#" class="small button joyride-next-tip"></a>'}},settings:{},init:function(f,g,e){this.scope=f||this.scope;Foundation.inherit(this,"throttle data_options scrollTo scrollLeft delay");if(typeof g==="object"){c.extend(true,this.settings,this.defaults,g)}else{c.extend(true,this.settings,this.defaults,e)}if(typeof g!="string"){if(!this.settings.init){this.events()}return this.settings.init}else{return this[g].call(this,e)}},events:function(){var e=this;c(this.scope).on("click.joyride",".joyride-next-tip, .joyride-modal-bg",function(f){f.preventDefault();if(this.settings.$li.next().length<1){this.end()}else{if(this.settings.timer>0){clearTimeout(this.settings.automate);this.hide();this.show();this.startTimer()}else{this.hide();this.show()}}}.bind(this)).on("click.joyride",".joyride-close-tip",function(f){f.preventDefault();this.end()}.bind(this));c(b).on("resize.fndtn.joyride",e.throttle(function(){if(c("[data-joyride]").length>0&&e.settings.$next_tip){if(e.is_phone()){e.pos_phone()}else{e.pos_default(false,true)}}},100));this.settings.init=true},start:function(){var f=this,h=c(this.scope).find("[data-joyride]"),e=["timer","scrollSpeed","startOffset","tipAnimationFadeSpeed","cookieExpires"],g=e.length;if(!this.settings.init){this.init()}this.settings.$content_el=h;this.settings.body_offset=c(this.settings.tipContainer).position();this.settings.$tip_content=this.settings.$content_el.find("> li");this.settings.paused=false;this.settings.attempts=0;this.settings.tipLocationPatterns={top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]};if(typeof c.cookie!=="function"){this.settings.cookieMonster=false}if(!this.settings.cookieMonster||this.settings.cookieMonster&&c.cookie(this.settings.cookieName)===null){this.settings.$tip_content.each(function(j){var l=c(this);c.extend(true,f.settings,f.data_options(l));for(var k=g-1;k>=0;k--){f.settings[e[k]]=parseInt(f.settings[e[k]],10)}f.create({$li:l,index:j})});if(!this.settings.startTimerOnClick&&this.settings.timer>0){this.show("init");this.startTimer()}else{this.show("init")}}},resume:function(){this.set_li();this.show()},tip_template:function(f){var g,e;f.tip_class=f.tip_class||"";g=c(this.settings.template.tip).addClass(f.tip_class);e=c.trim(c(f.li).html())+this.button_text(f.button_text)+this.settings.template.link+this.timer_instance(f.index);g.append(c(this.settings.template.wrapper));g.first().attr("data-index",f.index);c(".joyride-content-wrapper",g).append(e);return g[0]},timer_instance:function(f){var e;if((f===0&&this.settings.startTimerOnClick&&this.settings.timer>0)||this.settings.timer===0){e=""}else{e=this.outerHTML(c(this.settings.template.timer)[0])}return e},button_text:function(e){if(this.settings.nextButton){e=c.trim(e)||"Next";e=this.outerHTML(c(this.settings.template.button).append(e)[0])}else{e=""}return e},create:function(g){var f=g.$li.attr("data-button")||g.$li.attr("data-text"),e=g.$li.attr("class"),h=c(this.tip_template({tip_class:e,index:g.index,button_text:f,li:g.$li}));c(this.settings.tipContainer).append(h)},show:function(f){var e=null;if(this.settings.$li===d||(c.inArray(this.settings.$li.index(),this.settings.pauseAfter)===-1)){if(this.settings.paused){this.settings.paused=false}else{this.set_li(f)}this.settings.attempts=0;if(this.settings.$li.length&&this.settings.$target.length>0){this.settings.tipSettings=c.extend(this.settings,this.data_options(this.settings.$li));this.settings.timer=parseInt(this.settings.timer,10);this.settings.tipSettings.tipLocationPattern=this.settings.tipLocationPatterns[this.settings.tipSettings.tipLocation];if(!/body/i.test(this.settings.$target.selector)){this.scroll_to()}if(this.is_phone()){this.pos_phone(true)}else{this.pos_default(true)}e=this.settings.$next_tip.find(".joyride-timer-indicator");if(/pop/i.test(this.settings.tipAnimation)){e.width(0);if(thsi.settings.timer>0){this.settings.$next_tip.show();this.delay(function(){e.animate({width:e.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tipAnimationFadeSpeed)}else{this.settings.$next_tip.show()}}else{if(/fade/i.test(this.settings.tipAnimation)){e.width(0);if(this.settings.timer>0){this.settings.$next_tip.fadeIn(this.settings.tipAnimationFadeSpeed).show();this.delay(function(){e.animate({width:e.parent().width()},this.settings.timer,"linear")}.bind(this),this.settings.tipAnimationFadeSpeed)}else{this.settings.$next_tip.fadeIn(this.settings.tipAnimationFadeSpeed)}}}this.settings.$current_tip=this.settings.$next_tip}else{if(this.settings.$li&&this.settings.$target.length<1){this.show()}else{this.end()}}}else{this.settings.paused=true}},is_phone:function(){if(Modernizr){return Modernizr.mq("only screen and (max-width: 767px)")||c(".lt-ie9").length>0}return(this.settings.$window.width()<767)?true:false},hide:function(){this.settings.postStepCallback(this.settings.$li.index(),this.settings.$current_tip);c(".joyride-modal-bg").hide();this.settings.$current_tip.hide()},set_li:function(e){if(e){this.settings.$li=this.settings.$tip_content.eq(this.settings.startOffset);this.set_next_tip();this.settings.$current_tip=this.settings.$next_tip}else{this.settings.$li=this.settings.$li.next();this.set_next_tip()}this.set_target()},set_next_tip:function(){this.settings.$next_tip=c(".joyride-tip-guide[data-index='"+this.settings.$li.index()+"']");this.settings.$next_tip.data("closed","")},set_target:function(){var e=this.settings.$li.attr("data-class"),g=this.settings.$li.attr("data-id"),f=function(){if(g){return c(a.getElementById(g))}else{if(e){return c("."+e).first()}else{return c("body")}}};this.settings.$target=f()},scroll_to:function(){var f,e;f=c(b).height()/2;e=Math.ceil(this.settings.$target.offset().top-f+this.outerHeight(this.settings.$next_tip));if(e>0){this.scrollTo(c("html, body"),e,this.settings.scrollSpeed)}},paused:function(){if((c.inArray((this.settings.$li.index()+1),this.settings.pauseAfter)===-1)){return true}return false},restart:function(){this.hide();this.settings.$li=d;this.show("init")},pos_default:function(k,g){var f=Math.ceil(c(b).height()/2),j=this.settings.$next_tip.offset(),h=this.settings.$next_tip.find(".joyride-nub"),l=Math.ceil(this.outerHeight(h)/2),e=k||false;if(e){this.settings.$next_tip.css("visibility","hidden");this.settings.$next_tip.show()}if(typeof g==="undefined"){g=false}if(!/body/i.test(this.settings.$target.selector)){if(this.bottom()){var i=this.settings.$target.offset().left;if(Foundation.rtl){i=this.settings.$target.offset().width-this.settings.$next_tip.width()+i}this.settings.$next_tip.css({top:(this.settings.$target.offset().top+l+this.outerHeight(this.settings.$target)),left:i});this.nub_position(h,this.settings.tipSettings.nubPosition,"top")}else{if(this.top()){var i=this.settings.$target.offset().left;if(Foundation.rtl){i=this.settings.$target.offset().width-this.settings.$next_tip.width()+i}this.settings.$next_tip.css({top:(this.settings.$target.offset().top-this.outerHeight(this.settings.$next_tip)-l),left:i});this.nub_position(h,this.settings.tipSettings.nubPosition,"bottom")}else{if(this.right()){this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:(this.outerWidth(this.settings.$target)+this.settings.$target.offset().left)});this.nub_position(h,this.settings.tipSettings.nubPosition,"left")}else{if(this.left()){this.settings.$next_tip.css({top:this.settings.$target.offset().top,left:(this.settings.$target.offset().left-this.outerWidth(this.settings.$next_tip)-l)});this.nub_position(h,this.settings.tipSettings.nubPosition,"right")}}}}if(!this.visible(this.corners(this.settings.$next_tip))&&this.settings.attempts<this.settings.tipSettings.tipLocationPattern.length){h.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left");this.settings.tipSettings.tipLocation=this.settings.tipSettings.tipLocationPattern[this.settings.attempts];this.settings.attempts++;this.pos_default()}}else{if(this.settings.$li.length){this.pos_modal(h)}}if(e){this.settings.$next_tip.hide();this.settings.$next_tip.css("visibility","visible")}},pos_phone:function(j){var i=this.outerHeight(this.settings.$next_tip),h=this.settings.$next_tip.offset(),g=this.outerHeight(this.settings.$target),f=c(".joyride-nub",this.settings.$next_tip),k=Math.ceil(this.outerHeight(f)/2),e=j||false;f.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left");if(e){this.settings.$next_tip.css("visibility","hidden");this.settings.$next_tip.show()}if(!/body/i.test(this.settings.$target.selector)){if(this.top()){this.settings.$next_tip.offset({top:this.settings.$target.offset().top-i-k});f.addClass("bottom")}else{this.settings.$next_tip.offset({top:this.settings.$target.offset().top+g+k});f.addClass("top")}}else{if(this.settings.$li.length){this.pos_modal(f)}}if(e){this.settings.$next_tip.hide();this.settings.$next_tip.css("visibility","visible")}},pos_modal:function(e){this.center();e.hide();if(!this.settings.$next_tip.data("closed")){if(c(".joyride-modal-bg").length<1){c("body").append('<div class="joyride-modal-bg">').show()}if(/pop/i.test(this.settings.tipAnimation)){c(".joyride-modal-bg").show()}else{c(".joyride-modal-bg").fadeIn(this.settings.tipAnimationFadeSpeed)}}},center:function(){var e=c(b);this.settings.$next_tip.css({top:(((e.height()-this.outerHeight(this.settings.$next_tip))/2)+e.scrollTop()),left:(((e.width()-this.outerWidth(this.settings.$next_tip))/2)+this.scrollLeft(e))});return true},bottom:function(){return/bottom/i.test(this.settings.tipSettings.tipLocation)},top:function(){return/top/i.test(this.settings.tipSettings.tipLocation)},right:function(){return/right/i.test(this.settings.tipSettings.tipLocation)},left:function(){return/left/i.test(this.settings.tipSettings.tipLocation)},corners:function(h){var e=c(b),g=e.width()+this.scrollLeft(e),f=e.width()+e.scrollTop();return[h.offset().top<=e.scrollTop(),g<=h.offset().left+this.outerWidth(h),f<=h.offset().top+this.outerHeight(h),this.scrollLeft(e)>=h.offset().left]},visible:function(e){var f=e.length;while(f--){if(e[f]){return false}}return true},nub_position:function(e,g,f){if(g==="auto"){e.addClass(f)}else{e.addClass(g)}},startTimer:function(){if(this.settings.$li.length){this.settings.automate=setTimeout(function(){this.hide();this.show();this.startTimer()}.bind(this),this.settings.timer)}else{clearTimeout(this.settings.automate)}},end:function(){if(this.settings.cookieMonster){c.cookie(this.settings.cookieName,"ridden",{expires:this.settings.cookieExpires,domain:this.settings.cookieDomain})}if(this.settings.timer>0){clearTimeout(this.settings.automate)}this.settings.$next_tip.data("closed",true);c(".joyride-modal-bg").hide();this.settings.$current_tip.hide();this.settings.postStepCallback(this.settings.$li.index(),this.settings.$current_tip);this.settings.postRideCallback(this.settings.$li.index(),this.settings.$current_tip)},outerHTML:function(e){return e.outerHTML||new XMLSerializer().serializeToString(e)},off:function(){c(this.scope).off(".joyride");c(b).off(".joyride");c(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride");c(".joyride-tip-guide, .joyride-modal-bg").remove();clearTimeout(this.settings.automate);this.settings={}}}}(Foundation.zj,this,this.document));